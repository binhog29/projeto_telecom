{% extends "base.html" %}

{% block conteudo %}
<div class="row mb-4">
    <div class="col-12">
        <h1 class="text-primary"><i class="bi bi-optical-audio"></i> Engenharia FTTH/GPON</h1>
        <p class="lead text-muted">Documentação técnica avançada: Arquitetura, Orçamento de Potência e Provisionamento Lógico.</p>
    </div>
</div>

<div class="row g-4">
    <div class="col-lg-7">
        <h2 class="section-title text-primary"><i class="bi bi-diagram-3-fill"></i> 1. Arquitetura Física</h2>
        <div class="mt-3 mb-5">
            <div class="diagram-box shadow">
[ CORE IP / BRAS ] (VLAN 100 - Internet)
        | 10Gbps (Link Aggregation)
[ OLT GPON ] <--- O "Cérebro" da rede óptica
        | Porta PON (SFP C+ gera +5dBm de luz)
        |
[ DIO ] -> [ CABO TRONCO ] -> [ CEO (Fusão) ]
                                     |
                            [ SPLITTER PRIMÁRIO 1:8 ]
                                     |
                            [ REDE DE DISTRIBUIÇÃO ]
                                     |
                            [ CTO - SPLITTER 1:16 ]
                                     |
                            [ CABO DROP FLAT ]
                                     |
[ CLIENTE ] (PTO -> Cordão -> ONU Recebe -22dBm)
            </div>
            <p class="text-muted small mt-2">Fluxo completo desde o datacenter até a casa do cliente.</p>
        </div>

        <h2 class="section-title text-primary"><i class="bi bi-table"></i> 2. Parâmetros de Qualidade (Checklist)</h2>
        <div class="table-responsive mt-3 bg-white p-3 rounded shadow-sm">
            <table class="table table-hover table-bordered m-0">
                <thead class="table-primary">
                    <tr><th>Parâmetro</th><th>Valor Ideal</th><th>Valor Crítico (Falha)</th><th>Ação Corretiva</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Potência na ONU (RX)</strong></td>
                        <td class="text-success">-15 a -25 dBm</td>
                        <td class="text-danger">> -27 dBm</td>
                        <td>Limpar conectores, verificar dobras no cabo drop.</td>
                    </tr>
                    <tr>
                        <td><strong>Potência da OLT (TX)</strong></td>
                        <td class="text-success">+3 a +7 dBm (Classe C+)</td>
                        <td class="text-danger">< +1 dBm</td>
                        <td>Trocar módulo SFP na OLT.</td>
                    </tr>
                    <tr>
                        <td><strong>Temperatura ONU</strong></td>
                        <td class="text-success">30°C a 60°C</td>
                        <td class="text-danger">> 80°C</td>
                        <td>Melhorar ventilação no local do cliente.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="col-lg-5">
        <div class="card border-primary shadow sticky-top" style="top: 100px; z-index: 1;">
            <div class="card-header bg-primary text-white fw-bold">
                <i class="bi bi-terminal-fill"></i> Nível 2: Provisionamento (CLI)
            </div>
            <div class="card-body bg-dark text-info font-monospace small p-3" style="max-height: 600px; overflow-y: auto;">
                <p class="text-white mb-1">// 1. Acessar a placa GPON na OLT</p>
                <div class="mb-3">> interface gpon 0/1</div>

                <p class="text-white mb-1">// 2. Autorizar a ONU que foi plugada na porta 3</p>
                <div class="text-muted">// ont add [porta] [id_onu] sn-auth [serial] omci ont-lineprofile-id 10 ont-srvprofile-id 20 desc "CLIENTE_FABIO"</div>
                <div class="mb-3">> ont add 3 1 sn-auth 4857544300E5D89F omci ont-lineprofile-id 10 ont-srvprofile-id 20 desc "FABIO_SILVA"</div>
                
                <p class="text-white mb-1">// 3. Configurar a porta nativa (VLAN) na ONU</p>
                <div class="mb-3">> ont port native-vlan 3 1 eth 1 vlan 100</div>

                <p class="text-white mb-1">// 4. Criar o fluxo de serviço (Service Port)</p>
                <div class="text-muted">// Conecta a VLAN 100 do cliente à VLAN 100 do roteador de borda</div>
                <div class="mb-3">> service-port 100 vlan 100 gpon 0/1/3 ont 1 gemport 1 multi-service user-vlan 100 rx-cttr 6 tx-cttr 6</div>

                <hr class="border-secondary">
                <p class="text-success mb-1">// COMANDOS DE DIAGNÓSTICO:</p>
                <p class="mb-1">> display ont info 0/1 3 1 <span class="text-muted">(Vê status online/offline)</span></p>
                <p class="mb-1">> display ont optical-info 0/1 3 1 <span class="text-muted">(Vê sinal dBm remoto)</span></p>
            </div>
            <div class="card-footer text-muted small">
                * Exemplo baseado em sintaxe Huawei/ZTE.
            </div>
        </div>
    </div>
</div>
{% endblock %}
