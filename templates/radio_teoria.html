{% extends "base.html" %}

{% block conteudo %}
<div class="row mb-4">
    <div class="col-12">
        <h1 class="text-success"><i class="bi bi-broadcast"></i> Engenharia de Redes Wireless (WISP)</h1>
        <p class="lead text-muted">Documentação avançada sobre enlaces de rádio, infraestrutura e física de RF.</p>
    </div>
</div>

<div class="row g-4">
    
    <div class="col-lg-7">
        
        <h2 class="section-title text-success" style="border-color: #198754 !important;"><i class="bi bi-diagram-3-fill"></i> 1. Topologias de Enlace</h2>
        <div class="mt-3 mb-5">
            <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">PTP (Point-to-Point / Ponto-a-Ponto)</summary>
                <div class="details-content bg-white">
                    <p>Conexão dedicada entre dois rádios (Backhaul). Usa antenas disco de alto ganho (30dBi+) e feixe estreito para longas distâncias.</p>
                </div>
            </details>
            <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">PTMP (Point-to-MultiPoint / Ponto-Multiponto)</summary>
                <div class="details-content bg-white">
                    <p>Uma estação base (AP) atende múltiplos clientes (CPEs). Usa antenas Setoriais (Painéis) em ângulos (60°, 90°).</p>
                </div>
            </details>
        </div>

        <h2 class="section-title text-success" style="border-color: #198754 !important;"><i class="bi bi-soundwave"></i> 2. Espectro e Frequências</h2>
        <div class="mt-3 mb-5">
             <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">2.4 GHz (A banda poluída)</summary>
                <div class="details-content bg-white">
                    <p>Maior penetração em obstáculos leves. **Desvantagem:** Extremamente poluída (Wi-Fi doméstico, Bluetooth). EVITADA em PTMP urbano.</p>
                </div>
            </details>
            <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">5.x GHz (O padrão WISP)</summary>
                <div class="details-content bg-white">
                    <p>Muitos canais disponíveis e menor Zona de Fresnel. **Requisito:** Exige visada direta (LOS) quase perfeita.</p>
                </div>
            </details>
            <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">Ondas Milimétricas (24 GHz, 60 GHz)</summary>
                <div class="details-content bg-white">
                    <p>Bandas gigantescas (passa 1Gbps+). **Desvantagem:** Alcance curtíssimo e sofre muito com chuva (Rain Fade).</p>
                </div>
            </details>
        </div>

        <h2 class="section-title text-success" style="border-color: #198754 !important;"><i class="bi bi-router-fill"></i> 3. Hardware e Antenas</h2>
        <div class="mt-3 mb-5">
            <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">Tipos de Antenas</summary>
                <div class="details-content bg-white">
                    <p>Disco/Parabólica (PTP), Setorial/Painel (PTMP), Omni (Evitada em áreas urbanas).</p>
                </div>
            </details>
            <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">Rádio: Componentes Internos</summary>
                <div class="details-content bg-white">
                    <p>Chipset (Atheros/Qualcomm), Amplificador de Potência (PA), Portas PoE.</p>
                </div>
            </details>
        </div>
        
        <h2 class="section-title text-success" style="border-color: #198754 !important;"><i class="bi bi-tower"></i> 4. Infraestrutura Pesada</h2>
        <div class="mt-3 mb-5">
            <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">Torres</summary>
                <div class="details-content bg-white">
                    <p>Autoportante (Base larga, mais cara) e Estaiada (Cabo de aço, mais barata).</p>
                </div>
            </details>
            <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">Cabos e Conectores</summary>
                <div class="details-content bg-white">
                    <p>OBRIGATÓRIO usar Cabo UTP BLINDADO (STP/FTP) e Conector RJ45 Blindado para descarregar ESD.</p>
                </div>
            </details>
        </div>
        
        <h2 class="section-title text-success" style="border-color: #198754 !important;"><i class="bi bi-sliders"></i> 5. Física de RF & Configuração</h2>
        <div class="mt-3 mb-5">
             <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">Zona de Fresnel (O conceito vital)</summary>
                <div class="details-content bg-white">
                    <p>O sinal é um "dirigível" (área elíptica). **Regra 60%:** Pelo menos 60% dessa zona deve estar totalmente limpa para evitar interferência destrutiva.</p>
                </div>
            </details>
            <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">SNR, Modulação (MCS) e Data Rate</summary>
                <div class="details-content bg-white">
                    <p>A velocidade (Mbps) é definida pelo **SNR** (Sinal - Ruído). Quanto maior o SNR, mais complexa a Modulação (256QAM) e maior a banda.</p>
                </div>
            </details>
            <details>
                <summary class="bg-light p-3 fw-bold text-success rounded">Largura de Canal (Channel Width)</summary>
                <div class="details-content bg-white">
                    <p>A "largura da estrada" (20 MHz, 40 MHz). Canais maiores passam mais banda, mas pegam mais interferência.</p>
                </div>
            </details>
        </div>
        
        <div class="alert alert-warning small fw-bold">
            <i class="bi bi-lightbulb-fill"></i> Regra de Ouro WISP: "Quem tem visada, tem tudo." Se não há LOS perfeita em 5.8GHz, o enlace nunca será 100% estável.
        </div>

    </div> <div class="col-lg-5">
        
        <div class="card shadow-sm border-success mb-4 sticky-top" style="top: 100px; z-index: 1;">
            <div class="card-header bg-success text-white fw-bold">
                <i class="bi bi-calculator"></i> Calculadora Zona de Fresnel (Python Server-Side)
            </div>
            <div class="card-body">
                <p class="text-muted small">Calcule o raio livre necessário no meio do enlace para garantir performance máxima.</p>
                
                <form method="POST" action="{{ url_for('radio_teoria') }}">
                    <div class="mb-3">
                        <label class="form-label fw-bold">Distância do Enlace (km):</label>
                        <input type="number" name="radio_dist" class="form-control" value="5" step="0.1" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-bold">Frequência (GHz):</label>
                        <select name="radio_freq" class="form-select" required>
                            <option value="2.4">2.4 GHz (Legado)</option>
                            <option value="5.8" selected>5.8 GHz (WISP Padrão)</option>
                            <option value="11">11 GHz (Licenciado)</option>
                            <option value="24">24 GHz (Ondas Milimétricas)</option>
                        </select>
                    </div>

                    {% if erro_fresnel %}
                    <div class="alert alert-danger small">{{ erro_fresnel }}</div>
                    {% endif %}

                    <button type="submit" class="btn btn-success w-100 fw-bold">CALCULAR RAIO</button>
                </form>

                {% if resultado_fresnel %}
                <div id="fresnelResult" class="alert alert-info mt-4 text-center shadow-sm">
                    <h3 class="fw-bold mb-0 text-dark">{{ resultado_fresnel.raio_total }} m</h3>
                    <small>Raio total (100%) no centro do enlace</small>
                    <hr>
                    <p class="mb-0 fw-bold fs-5">
                        Mantenha **livre** (60%):
                        <span class="fs-3 text-success d-block">{{ resultado_fresnel.raio_livre }} m</span>
                    </p>
                    <p class="small text-muted mb-0">Para um enlace de {{ resultado_fresnel.distancia }} km em {{ resultado_fresnel.frequencia }} GHz.</p>
                </div>
                {% endif %}

            </div>
        </div>
        
        <a href="{{ url_for('radio_hardware') }}" class="btn btn-outline-success mt-3 w-100"><i class="bi bi-cpu"></i> Ver Enciclopédia de Hardware Rádio →</a>
    </div> </div>
{% endblock %}
